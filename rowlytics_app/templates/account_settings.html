{% extends "base.html" %}

{% block title %}Account Settings | Erglytics{% endblock %}

{% block body_class %}capture account-settings{% endblock %}

{% block header %}
<header class="capture__header">
  <div class="capture__header-inner">
    <div class="capture__branding">
      <img
        class="logo-mark__image"
        src="{{ 'images/erg_cool.png' | cloudfront_url }}"
        alt="Erglytics logo"
      />
      <span class="logo-mark__text">Erglytics</span>
    </div>

    <a class="capture__back" href="{{ url_for('public.landing_page') }}">
      Back
    </a>
  </div>
</header>
{% endblock %}

{% block content %}
<main class="capture__main">
  <section class="team-panel team-panel--centered">
    <div class="team-panel__header">
      <h2>Account Settings</h2>
      <p>Update your display name or delete your account.</p>
    </div>

    <form id="accountNameForm" class="team-form">
      <label class="team-form__label" for="accountName">Display name</label>
      <div class="team-form__row">
        <input
          id="accountName"
          class="team-form__input"
          type="text"
          name="name"
          value="{{ user_name or '' }}"
          placeholder="Your name"
          required
        />
        <button class="btn" type="submit">Save</button>
      </div>
    </form>

    <div class="team-panel__section">
      <h3>Delete account</h3>
      <p class="team-panel__hint">This removes your profile, team memberships, and recordings.</p>

      <div id="accountDeleteConfirm" class="account-delete account-delete--hidden">
        <p class="account-delete__text">Are you sure you want to delete your account?</p>
        <div class="account-delete__actions">
          <button id="confirmDeleteAccount" class="btn btn--danger" type="button">Yes, delete</button>
          <button id="cancelDeleteAccount" class="btn btn--subtle" type="button">Cancel</button>
        </div>
      </div>

      <button id="deleteAccountBtn" class="btn btn--danger" type="button">Delete account</button>
    </div>

    <p id="accountMessage" class="team-message" aria-live="polite"></p>
  </section>
</main>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/account_settings.js') }}" defer></script>
{% endblock %}
