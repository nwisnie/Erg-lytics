<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{ card.title }}</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/styles.css') }}"
    />
  </head>

  <body class="capture">
    <header class="capture__header">
      <div class="capture__header-inner">
        <div class="capture__branding">
            <img
                class="logo-mark__image"
                src="{{ url_for('static', filename='images/erg_cool.png') }}"
                alt="Rowlytics logo"
            />

          <span class="logo-mark__text">Rowlytics</span>
        </div>

        <a class="capture__back" href="{{ url_for('public.landing_page') }}">
          Back
        </a>
      </div>
    </header>

    <main class="capture__main">
      <div id="poseStatus" class="pose-status pose-status--hidden">Full body not in frame</div>

      <section class="capture__frame">
        <video
          id="liveCamera"
          class="capture__image"
          playsinline
          muted
          poster="{{ url_for('static', filename='images/is-rowing-good-for-your-glutes.png') }}"
        ></video>
      </section>

      <div class="capture__controls">
        <button id="toggleCamera" class="btn btn--subtle">Start</button>
        <button class="btn btn--dark">Cancel</button>
      </div>
    </main>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        fetch("/api/increment/capture-workout", {
          method: "POST"
        })
        .catch(err => console.error("Failed to increment:", err));
      });
    </script>

    <script type="module" src="{{ url_for('static', filename='js/capture_workout.js') }}"></script>

  </body>
</html>
