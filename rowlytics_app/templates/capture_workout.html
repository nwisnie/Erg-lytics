{% extends "base.html" %}

{% block title %}{{ card.title }}{% endblock %}

{% block body_class %}capture{% endblock %}

{% block body_attrs %}
data-user-id="{{ user_id }}"
data-api-base="{{ request.url_root.rstrip('/') }}"
{% endblock %}

{% block header %}
  {% include "partials/header.html" %}
{% endblock %}

{% block content %}
<main class="page page-pad capture__main">
  <div class="container container--wide stack">
      <div id="poseStatus" class="pose-status pose-status--hidden">Full body not in frame</div>

    <section class="capture__frame">
      <div class="capture__viewport">
        <div id="capturePlaceholder" class="capture__placeholder" aria-live="polite">
          <p class="capture__placeholder-text">Position your body like the below image</p>
          <img
            class="capture__placeholder-image"
            src="{{ 'images/erg_cool.png' | cloudfront_url }}"
            alt="Rowing posture guide"
          />
          <p class="capture__placeholder-text">Keep full body in frame when working out</p>
        </div>
        <video
          id="liveCamera"
          class="capture__image"
          playsinline
          muted
          poster="{{ 'images/erg_cool.png' | cloudfront_url }}"
        ></video>
        <canvas id="poseOverlay" class="capture__overlay"></canvas>
      </div>
    </section>

    <div class="capture__controls">
      <button id="toggleCamera" class="btn btn--start">Start</button>
      <button
        id="switchCamera"
        class="btn btn--subtle capture__switch--hidden"
        type="button"
      >
        Use Rear Camera
      </button>
    </div>
  </div>
</main>
{% endblock %}

{% block scripts %}
  <script type="module" src="{{ url_for('static', filename='js/capture_workout.js') }}"></script>
{% endblock %}
